(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{0:function(t,e,o){"use strict";o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return s})),o.d(e,"b",(function(){return i}));const n=async()=>{let t=null;try{return await new Promise((e,o)=>{const n=Date.now(),s=()=>{if(window.nclood)e(!0);else{(Date.now()-n)/1e3>10?o("nclood library failed to load."):(clearTimeout(t),t=setTimeout(()=>{s()},500))}};s()}),!!window.nclood}catch(t){return console.log(t),!1}},s=async()=>{let t=null;try{return await new Promise((e,o)=>{const n=Date.now(),s=()=>{if(window.Alps)e(!0);else{(Date.now()-n)/1e3>10?o("Alps failed to load."):(clearTimeout(t),t=setTimeout(()=>{s()},500))}};s()}),!!window.Alps}catch(t){return console.log(t),!1}},i=async()=>{let t=null,e=null;try{return await new Promise((e,o)=>{const n=Date.now(),s=function(){if(window.nclood.Accounts.loaded)e(!0);else{(Date.now()-n)/1e3>10?o("Could not retrieve My Nintendo user information."):(clearTimeout(t),t=setTimeout(()=>{s()},500))}};s()}),e=window.nclood.Accounts.currentUser,e||window.nclood.Accounts.onLogin(t=>{e=window.nclood.Accounts.currentUser}),e}catch(t){return console.log(t),e}}},14:function(t,e,o){"use strict";o.r(e);var n=o(4);let s,i=[];const a=function(t){let e=t.querySelector(".is-active");if(e){let o=e.nextElementSibling;o||(o=t.firstElementChild),e.classList.remove("is-active"),o.classList.add("is-active")}else e=t.firstElementChild,e.classList.add("is-active");setTimeout(()=>{a(t)},5e3)},l=function(t){let e=0;const o=t.querySelectorAll(".accolades__item");for(let t of o){const o=t.offsetHeight;o>e&&(e=o)}t.style.height=e+"px"},c=function(){clearTimeout(s),s=setTimeout(()=>{for(let t of i)l(t)},300)};var r=o(0);const d=document.querySelector(".mynintendo"),u=document.querySelector(".mynintendo__stickers");async function h(){!async function(){const t=await Object(n.a)();for(let{name:e,found:o}of t)o&&(u.querySelector(".mynintendo__stickers-"+e).style.filter="");const e=t.reduce((t,e)=>{let{found:o}=e;return o?t+1:t},0);d.classList[e>=t.length?"add":"remove"]("is-complete")}(),async function(){const t=await Object(r.b)();d.classList[t?"add":"remove"]("is-logged-in")}()}!async function(){await Object(r.b)(),h();try{window.nclood.Accounts.onLogin(()=>{h()}),window.nclood.Accounts.onLogout(()=>{h()})}catch(t){console.error("nclood error when settings stickers hooks on homepage",t)}}(),function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'[data-controller="Accolades"]';if("object"==typeof t&&t.length<=0)return;const e="string"==typeof t?document.querySelectorAll(t):t;if(e){for(let t of e){const e=t.querySelector(".accolades__list");e&&(i.push(e),a(e),l(e))}window.addEventListener("resize",c)}}()},2:function(t,e,o){"use strict";function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(){var t=this;this.state=!1,this.modal=document.createElement("div"),this.modalOverlay=document.createElement("div"),this.modalFocusStart=document.createElement("div"),this.modalFocusEnd=document.createElement("div"),this.modalClose=document.createElement("button"),this.modalClose.innerHTML="<span>Close</span>",this.modalWrapper=document.createElement("div"),this.modalContent=document.createElement("div"),this.wrapperOfContent=document.createElement("div"),this.className="modal",this.classNameOpen="modal--open",this.appended=!1,this.storeContent=!1,this._onOpen=null,this._onClose=null,this._focusOnClose=null,this._content=null,this.modal.classList.add(this.className),this.modalOverlay.classList.add(this.className+"__overlay"),this.modalFocusStart.classList.add(this.className+"__focus-start"),this.modalFocusEnd.classList.add(this.className+"__focus-end"),this.modalClose.classList.add(this.className+"__close"),this.modalWrapper.classList.add(this.className+"__wrapper"),this.modalContent.classList.add(this.className+"__content"),this.wrapperOfContent.classList.add(this.className+"-content-wrapper"),this.modal.setAttribute("role","dialog"),this.modalFocusEnd.setAttribute("tabindex",0),this.modalFocusStart.setAttribute("tabindex",0),this.modalContent.setAttribute("tabindex",-1),this.modalWrapper.appendChild(this.modalFocusStart),this.modalWrapper.appendChild(this.modalClose),this.modalWrapper.appendChild(this.modalContent),this.modalWrapper.appendChild(this.modalFocusEnd),this.modal.appendChild(this.modalOverlay),this.modal.appendChild(this.modalWrapper),document.body.appendChild(this.wrapperOfContent),this.modalFocusEnd.addEventListener("focus",(function(){t.modalClose.focus()})),this.modalFocusStart.addEventListener("focus",this.focusLastElement.bind(this)),this.modalClose.addEventListener("click",this.close.bind(this)),this.modalOverlay.addEventListener("click",this.close.bind(this))}var e,o,s,i=t.prototype;return i.close=function(){var e,o=this;this.state&&(this.modal.classList.remove(this.classNameOpen),this.optionalClass&&("string"==typeof this.optionalClass?this.modal.classList.remove(this.optionalClass):this.optionalClass instanceof Array&&(e=this.modal.classList).remove.apply(e,this.optionalClass)),this.focusOnClose&&this.focusOnClose.focus(),setTimeout((function(){o.state=!1,o.modal.style.display="none",o.storeContent?o.wrapperOfContent.appendChild(o._content):o.modalContent.innerHTML=""}),500),t.hash&&history.replaceState("",document.title,window.location.pathname),this.onClose&&this.onClose())},i.open=function(){var t=this;if(!this.state){var e;this.optionalClass&&("string"==typeof this.optionalClass?this.modal.classList.add(this.optionalClass):this.optionalClass instanceof Array&&(e=this.modal.classList).add.apply(e,this.optionalClass)),document.body.appendChild(this.modal);var o=this.appended?0:100;this.appended||(this.appended=!0),this.modalContent.append(this._content),this.modal.style.display="block",setTimeout((function(){t.modal.classList.add(t.classNameOpen),t.focusFirstElement()}),o),this.state=!0,this.onOpen&&this.onOpen(),document.addEventListener("keydown",function e(o){27==o.keyCode&&(t.close(),document.removeEventListener("keydown",e.bind(t),!1))}.bind(this),!1)}},i.focusFirstElement=function(){var t=function t(e){return e.firstElementChild?t(e.firstElementChild):e}(this.modalContent.firstElementChild);t.setAttribute("tabindex",-1),t.focus()},i.focusLastElement=function(){var t=this.modalContent.querySelectorAll('[href], button, [tabindex="0"], [role="button"]');t.length>0?t[t.length-1].focus():this.modalClose.focus()},e=t,s=[{key:"hash",get:function(){var t=/#\!?\/(.+)\//i.exec(window.location.hash);return t&&t.length>1?t[1]:null}}],(o=[{key:"focusOnClose",get:function(){return this._focusOnClose},set:function(t){!t instanceof HTMLButtonElement&&!t instanceof HTMLAnchorElement&&!t.getAttribute("tabindex")||(this._focusOnClose=t)}},{key:"onOpen",get:function(){return this._onOpen},set:function(t){t&&"function"==typeof t&&(this._onOpen=t)}},{key:"onClose",get:function(){return this._onClose},set:function(t){t&&"function"==typeof t&&(this._onClose=t)}},{key:"optionalClass",set:function(t){t&&(this._optionalClass=t)},get:function(){return this._optionalClass||""}},{key:"closeButtonContent",set:function(t){if(t){if("string"!=typeof t)return t instanceof HTMLElement?(this.modalClose.innerHTML="",void this.modalClose.appendChild(t)):void 0;this.modalClose.innerHTML=t}}},{key:"content",set:function(t){if(t&&!("string"!=typeof t&&!t instanceof HTMLElement)){if(this.storeContent&&this.wrapperOfContent.appendChild(this._content),this._content=t,"string"!=typeof t)return this.storeContent=!0,this.modalContent.innerHTML="",void this.modalContent.appendChild(this._content);this.storeContent=!1,this.modalContent.innerHTML=this._content}}}])&&n(e.prototype,o),s&&n(e,s),t}();e.a=s},4:function(t,e,o){"use strict";o.d(e,"b",(function(){return y})),o.d(e,"a",(function(){return m}));var n=o(2),s=o(0);const i=[{name:"cat_peach",found:!1},{name:"toad",found:!1},{name:"luigi",found:!1},{name:"super_bell",found:!1},{name:"cat_mario",found:!1}];let a,l,c=[...i],r=null,d=!1,u=!1;const h=document.querySelector(".sticker-modal");async function m(){if(u)return c;let t;return new Promise((function(e){t=setInterval(()=>{u&&(clearInterval(t),e(c))},1e3)}))}function f(){const t=c.reduce((t,e)=>{let{found:o}=e;return o?t+1:t},0)>=c.length;if(t&&a.modalContent.classList.add("is-all"),r&&t&&!d)try{window.Alps.Api.progressMissionStatus("c7834a85e026ade1",(t,e,o)=>{t?console.log("progressed mission c7834a85e026ade1"):console.log({errorCode:o,httpStatus:e})})}catch(t){console.error("nclood sticker mission error",t)}}function p(t){const e=t.currentTarget,o=e.dataset.name;"true"===e.getAttribute("aria-checked")||(c=c.map(t=>t.name===o?{...t,found:!0}:t),e.setAttribute("aria-checked",!0),f()),localStorage.setItem("sm3dw-stickers",JSON.stringify(c)),l&&a.modalContent.classList.remove("is-"+l),l=o,a.modalContent.classList.add("is-"+l),a.open()}async function C(t){if(r=t,r){u=!1,a.modalContent.classList.add("is-logged-in");try{const t=await new Promise((function(t,e){window.Alps.Api.retrieveMissionStatus("c7834a85e026ade1",(o,n)=>{o?e(o):t(n)})}));d="completed"===t.state}catch(t){console.error("nclood sticker mission error",t)}if(d)a.modalContent.classList.add("is-all"),c=i.map(t=>({...t,found:!0}));else{const t=localStorage.getItem("sm3dw-stickers");t&&(c=JSON.parse(t),f())}for(let{name:t,found:e}of c){const o=document.querySelector(`[data-controller="Sticker"][data-name="${t}"]`);o&&o.setAttribute("aria-checked",e)}u=!0}}async function y(){const t=document.querySelectorAll('[data-controller="Sticker"]');a=new n.a,a.optionalClass="modal--sticker",a.modalContent.classList.add("pattern","pattern--white-dots"),a.content=h;try{await Object(s.a)();const e=await Object(s.b)();e&&await C(e);for(let e of t)e.addEventListener("click",p);u=!0}catch(e){console.error("Error initiating stickers",e);for(let e of t)e.classList.add("is-error")}finally{for(let e of t)e.classList.add("is-loaded");try{window.nclood.Accounts.onLogin(t=>{C(t)}),window.nclood.Accounts.onLogout(()=>{r=null,d=!1,a.modalContent.classList.remove("is-logged-in")})}catch(t){console.error("nclood sticker mission error",t)}}}}},[[14,0]]]);